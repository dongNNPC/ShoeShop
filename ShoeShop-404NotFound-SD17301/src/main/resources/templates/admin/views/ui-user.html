<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description"
	content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
<meta name="author" content="AdminKit">
<meta name="keywords"
	content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">
<link th:href="@{/fonts/fontawesome-free-6.4.0-web/css/all.css}"
	href="/fonts/fontawesome-free-6.4.0-web/css/all.css" rel="stylesheet"
	type="text/css" media="all" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
	crossorigin="anonymous" />
<link rel="preconnect" href="https://fonts.gstatic.com"
	th:href="@{https://fonts.gstatic.com}">
<link rel="shortcut icon" th:href="@{/admin/img/icons/icon-48x48.png}" />

<link rel="canonical" th:href="@{https://demo-basic.adminkit.io/}" />

<title>UI - User</title>
<link th:href="@{/admin/css/admin.css}" rel="stylesheet" type="text/css"
	media="all">
<link th:href="@{/admin/css/app.css}" rel="stylesheet" type="text/css"
	media="all">
<link
	th:href="@{https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap}"
	rel="stylesheet" type="text/css" media="all">
</head>

<body>
	<div class="wrapper">
		<div th:replace="./admin/layout/sidebar ::  #sidebar"></div>
		<div class="main">
			<div th:replace="./admin/layout/nav ::  #nav-admin"></div>

			<main class="content">
				<div class="container-fluid p-0">

					<div class="mb-3">
						<!-- <h1 class="h3 d-inline align-middle">Form Thông Tin</h1> -->
						<h3 class="fw-bold">THÔNG TIN CHO USERS</h3>
					</div>
					<div class="row">
						<div class="col-12 col-lg-6">
							<div class="card" style="height: 410px">
								<div class="card-header">
									<h5 class="card-title">Hình ảnh của user :</h5>

								</div>
								<div class="container bg ms-7 mt-5">
									<div class="square" id="imageSquare">
										<label>Click vào để thêm ảnh </label> <img
											th:if="${selectedImage != null}" th:src="${selectedImage}"
											class="selected-image" /> <input type="file" id="imageInput"
											style="display: none;" />
									</div>
									<br>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-6">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title">Form Thông Tin</h5>
									<h6 class="card-subtitle text-muted">Form thông tin để
										nhập thông tin cho User.</h6>
								</div>
								<div class="card-body">
									<form class="container" th:action="@{/shoeshop/admin/ui-user}"
										th:object="${user}" method="post">
										<hr>
										<div class="row">
											<div class="mb-3 col-lg-6">
												<label for="id" class="form-label"><b>Username?</b></label>
												<input type="text" class="form-control" th:field="*{iD}"
													placeholder="" /> <span class="text-danger"
													th:if="${#fields.hasErrors('iD')}" th:errors="*{iD}"></span>

											</div>

											<div class="mb-3 col-lg-6">
												<label for="password" class="form-label"><b>Password?</b></label>
												<input type="password" class="form-control"
													th:field="*{password}" id="password" placeholder="" /> <span
													class="text-danger"
													th:if="${#fields.hasErrors('password')}"
													th:errors="*{password}"></span>
											</div>
										</div>
										<div class="row">
											<div class="mb-3 col-lg-6">
												<label for="Name" class="form-label"><b>Name?</b></label> <input
													type="text" class="form-control" th:field="*{name}"
													id="name" placeholder="" /> <span class="text-danger"
													th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
											</div>
											<div class="mb-3 col-lg-6">
												<label for="email" class="form-label"><b>Email
														Address</b></label> <input type="email" class="form-control"
													th:field="*{email}" id="email" placeholder="" /> <span
													class="text-danger" th:if="${#fields.hasErrors('email')}"
													th:errors="*{email}"></span>
											</div>
										</div>
										<div class="row">
											<div class="mb-3 col-lg-6">
												<label for="address" class="form-label"><b>Address?</b></label>
												<input type="text" class="form-control"
													th:field="*{address}" id="address" placeholder="" /> <span
													class="text-danger" th:if="${#fields.hasErrors('address')}"
													th:errors="*{address}"></span>
											</div>
											<div class="mb-3 col-lg-6">
												<label for="phone" class="form-label"><b>phone
														Number?</b></label> <input type="text" class="form-control"
													th:field="*{phone}" id="phone" placeholder="" /> <span
													class="text-danger" th:if="${#fields.hasErrors('phone')}"
													th:errors="*{phone}"></span>
											</div>
										</div>


										<div class="pull-right">
											<button type="submit"
												formaction="/shoeshop/admin/list-user/create"
												class="btn btn-primary">
												Create <i class="fa-solid fa-plus"></i>
											</button>
											<button type="submit"
												formaction="/shoeshop/admin/list-user/update"
												class="btn btn-info">
												Update <i class="fa-solid fa-pen"></i>
											</button>
										</div>


									</form>

								</div>
							</div>
						</div>
					</div>

				</div>
			</main>
			<div th:if="${successMessage}" id="successDialog"
				class="dialog-overlay">
				<div class="dialog-content">
					<p th:text="${successMessage}"></p>
				</div>
			</div>
			<div th:if="${failed}" id="successDialog"
				class="dialog-overlay">
				<div class="dialog-content-failed">
					<p th:text="${failed}"></p>
				</div>
			</div>

			<div th:replace="./admin/layout/footer ::  #footer-admin"></div>
		</div>
	</div>

	<script th:src="@{/admin/js/app.js}"></script>
	<script th:inline="javascript">
		/*<![CDATA[*/
		const square = document.getElementById('imageSquare');
		const imageInput = document.getElementById('imageInput');

		square.addEventListener('click', function() {
			// Trigger the file selection dialog
			imageInput.click();
		});

		imageInput.addEventListener('change', function(event) {
			const file = event.target.files[0];

			// Check if a file was selected
			if (file) {
				const reader = new FileReader();

				// Read the contents of the file
				reader.onload = function() {
					const imageUrl = reader.result;

					// Create an image element and set the source
					const image = document.createElement('img');
					image.src = imageUrl;
					image.classList.add('selected-image');

					// Clear the square and append the image
					square.innerHTML = '';
					square.appendChild(image);

					// Send the image to the server via AJAX
					const formData = new FormData();
					formData.append('file', file);

					const xhr = new XMLHttpRequest();
					xhr.open('POST', '/upload', true);
					xhr.onload = function() {
						if (xhr.status === 200) {
							console.log('Image uploaded successfully');
						} else {
							console.error('Error uploading image');
						}
					};
					xhr.send(formData);
				};

				// Read the file as data URL
				reader.readAsDataURL(file);
			}
		});
		/*]]>*/
	</script>
	<script th:inline="javascript">
		setTimeout(function() {
			document.getElementById("successDialog").style.display = "none";
		}, 1000); // 5000 milliseconds = 5 seconds
	</script>


</body>

</html>